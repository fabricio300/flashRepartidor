<ion-header>
  <ion-toolbar color=primary>
    <ion-buttons>
        <ion-button (click)="back()">
          <ion-icon slot="icon-only" name="arrow-back"></ion-icon>
        </ion-button>
        <ion-title>Pedido</ion-title>
    </ion-buttons>
    
  </ion-toolbar>
</ion-header>


<ion-content>
  <!--<ion-button (click)="loadMap()" shape="round" fill="outline"> Aqui  </ion-button>-->
  <div class="contenedor-primordial"> 
  
    <!--<div id="map" #map class="contmapa"> <ion-spinner></ion-spinner> </div>

    <div id="address">
      <span>{{address}}</span>
    </div>-->









<div class="centrar" style="width: 100%; height: 7%; background: #252525; color:gold;">
  
 
    <h6 >Información del pedido</h6>

 
  
</div>

    <div class="contmapa centrar" style="height: 93%;" >




      <div class="mitad ladoEmpresa" style="overflow-y: scroll; width: 100%;">

          <label class="centrarIz">
              <img src="../../../assets/iconos/pin (2).png" class="icon">
              Destino:
            </label>
            <p>{{pedido.direccion_usuario}}</p>

            <label class="centrarIz">
                <img src="../../../assets/iconos/research.png" class="icon">
                Referecias:
            </label>

            <p>{{pedido.indicaciones}}</p>

            <label class="centrarIz">
              <img src="../../../assets/iconos/list (1).png" class="icon">
              Tarea:
            </label>
            <label *ngIf="pedido.servicios.lavanderia.length>0"><p *ngFor="let tarea of pedido.servicios.lavanderia">
              {{tarea.servicio}}
            </p></label>
            <label *ngIf="pedido.servicios.planchado.length>0"><p *ngFor="let tarea of pedido.servicios.planchado">
             Servicio de Planchado
            </p></label>
            <label *ngIf="pedido.servicios.tintoreria.length>0"><p *ngFor="let tarea of pedido.servicios.tintoreria">
              {{tarea.servicio}}
            </p></label>
           
    
            <label class="centrarIz">
              <img src="../../../assets/iconos/user (1).png" class="icon">
              Receptor:
            </label>
            <p>{{pedido.nombre_usuario}}</p>

            <label class="centrarIz">
              <img src="../../../assets/iconos/call-answer (2).png" class="icon">
              Contacto de receptor:
            </label>
    
            <p>{{pedido.telefono_usuario}}</p>


        <label class="centrarIz">
          <img src="../../../assets/iconos/shop.png" class="icon">
          Empresa:</label>

        <p>{{pedido.nombre_lavanderia}}</p>

        <label class="centrarIz">
          <img src="../../../assets/iconos/call-answer (2).png" class="icon">
          Contacto de lavanderia:
        </label>

        <p>{{pedido.telefono_lavanderia}}</p>

   
        <div>


        <ion-button expand="block" (click)="aceptarEnvio()" *ngIf="this.pedido.status == 'Nuevo pedido'">
            Aceptar envio
        </ion-button>
        <ion-button expand="block" (click)="mostrarRuta()" [disabled]="this.pedido.status == 'Nuevo pedido'">
          Ver ruta de entrega
        </ion-button>
        <ion-button expand="block" (click)="cancelarReparto()" *ngIf="this.pedido.status == 'Nuevo pedido'">
          Cancelar reparto
      </ion-button>


        </div>

    </div>



     




    </div>




  </div>

  <div id="DATOS" class="contenedor-primordial quitar" style="overflow-y:scroll; padding: 9px;"> 
   
    <h5 id="DATOS1" style=" color: rgb(177, 5, 5);">Ofertas de la empresa:</h5>
    <p *ngFor="let oferta of ofertas"><strong> &#8226; {{oferta.titulo}}</strong><br>
      <u>&nbsp;{{oferta.descripcion}}</u>
    </p>
    <br>
    <h5 style=" color: #394a6d;">Servicios solicitados:</h5>


  <h5 *ngIf="datosLavanderia.length>0" style=" color: rgb(177, 5, 5);">Lavanderia</h5>
  <div class="servicios" *ngFor="let servicio of datosLavanderia">
      <p><label *ngIf="servicio.servicio==null">Planchado </label>{{servicio.servicio}} ${{servicio.precio}} por {{servicio.unidad}}</p>
   
      <br>
      
      <div class="butonCont centrar">
        <label style="color: #C1C1C1;">
            Kilos / piezas: <br>
            <input type="number" [(ngModel)]="servicio.cantidad" >
        </label>
       <label style="padding: 5px; color: #C1C1C1;"><br>=</label>
        <label  style="color: #C1C1C1;">
              Precio por servicio: <br>
            <input type="number" id="{{servicio.servicio}}" value="{{servicio.cantidad*servicio.precio}}">
        </label>
         

      </div>

      
  </div>
  <h5 *ngIf="datosPlanchado.length>0" style=" color: rgb(177, 5, 5);">Planchado</h5>
  <div class="servicios" *ngFor="let servicio of datosPlanchado">
    <p><label *ngIf="servicio.servicio==null">Planchado </label>{{servicio.servicio}} ${{servicio.precio}} por {{servicio.unidad}}</p>
 
    <br>
    
    <div class="butonCont centrar">
      <label style="color: #C1C1C1;">
          Kilos / piezas: <br>
          <input type="number" [(ngModel)]="servicio.cantidad" >
      </label>
     <label style="padding: 5px; color: #C1C1C1;"><br>=</label>
      <label  style="color: #C1C1C1;">
            Precio por servicio: <br>
          <input type="number" id="{{servicio.servicio}}" value="{{servicio.cantidad*servicio.precio}}">
      </label>
       

    </div>

    
</div>
  <h5 *ngIf="datosTintoreria.length>0" style=" color: rgb(177, 5, 5);">Tintoreria</h5>  
  <div class="servicios" *ngFor="let servicio of datosTintoreria">
    <p><label *ngIf="servicio.servicio==null">Planchado </label>{{servicio.servicio}} ${{servicio.precio}} por {{servicio.unidad}}</p>
 
    <br>
    
    <div class="butonCont centrar">
      <label style="color: #C1C1C1;">
          Kilos / piezas: <br>
          <input type="number" [(ngModel)]="servicio.cantidad" >
      </label>
     <label style="padding: 5px; color: #C1C1C1;"><br>=</label>
      <label  style="color: #C1C1C1;">
            Precio por servicio: <br>
          <input type="number" id="{{servicio.servicio}}" value="{{servicio.cantidad*servicio.precio}}">
      </label>
       

    </div>

    
</div>




  <br>
  <h5 style="color: #3c9d9b;">Coste de transporte:  ${{pedido.precio.precio_regocojer}}</h5>
  <label >
    <h3 style="color: #3c9d9b;">Total de servicio: ${{subtotal}}</h3>

  </label>
  <br>

  <div style="margin-top:20px;">
    
    <ion-button (click)="getTotal()" expand="block">
      Obtener total
    </ion-button>
    <ion-button (click)="mostrarDatos()" color=danger expand="block">
      Aceptar
    </ion-button>
    <ion-button (click)="this.efectos.ocultarDatos()"color=danger expand="block">
      Cancelar
    </ion-button>
  </div>
  </div>

  <div id="RUTA" class="contenedor-primordial quitar" style="overflow-y:scroll; padding: 9px;">
    <div id="map" #map class="contmapa"> <ion-spinner></ion-spinner> </div>
    <ion-content style="height: calc(40% - 50px);">
    <div class="ion-padding-horizontal" id="panel"></div>
  </ion-content>
  <ion-button expand="block" href="/inicio?special=atras" *ngIf="this.pedido.status=='A lavandería' || this.pedido.status=='Entregando';">
    Regresar a Inicio
  </ion-button> 
  <ion-button expand="block" (click)="mostrarPesaje()" *ngIf="this.pedido.status=='Nuevo pedido' || this.pedido.status=='Recogiendo';">
    Registrar pesaje
  </ion-button> 
  </div>

  <div id="SERVICIOS" class="contenedor-primordial quitar" style="overflow-y:scroll; padding: 9px;">
    <h3 style="color: #1089ff;">
      Servicios pedidos:
    </h3>

    <h5 *ngIf="datosLavanderia.length>0" style="color: #3c9d9b;border-bottom: 1px solid #3c9d9b;">Lavandería:</h5>
    <div *ngFor="let lavado of datosLavanderia">
      <p >{{lavado.servicio}} ${{lavado.precio}} por {{lavado.unidad}}</p>
      <div *ngIf="lavado.cantidad!=0" class="centrar">
        <p style="margin: auto; color: red;" class="centrar">
          {{lavado.unidad}}/s: 
          <label style="color: black;">
            {{lavado.cantidad}}
          </label>
         
        </p>

        <p style="margin: auto;color: red;" class="centrar">
          Costo:      
          <label style="color: black;">
            ${{lavado.costo}}
          </label>
        </p>
      </div>
    
   </div>
  
    
    <h5 *ngIf="datosTintoreria.length>0" style="color: #3c9d9b; border-bottom: 1px solid #3c9d9b;">Tintoreria:</h5>
    <div *ngFor="let tinto of datosTintoreria">
      <p >{{tinto.servicio}} ${{tinto.precio}} por {{tinto.unidad}}</p>
      <div *ngIf="tinto.cantidad!=0" class="centrar">
        <p style="margin: auto; color: red;" class="centrar">
          {{tinto.unidad}}/s: 
          <label style="color: black;">
            {{tinto.cantidad}}
          </label>
         
        </p>
        <p style="margin: auto;color: red;" class="centrar">
          Costo:      
          <label style="color: black;">
            ${{tinto.costo}}
          </label>
        </p>
      </div>
    
   </div>


    <h5 *ngIf="datosPlanchado.length>0"  style="color: #3c9d9b; border-bottom: 1px solid #3c9d9b;">Planchado:</h5>


    <div *ngFor="let plan of datosPlanchado">
      <p >{{plan.unidad}} ${{plan.precio}}</p>
      <div *ngIf="plan.cantidad!=0" class="centrar">
        <p style="margin: auto; color: red;" class="centrar">
          {{plan.unidad}}/s:
          <label style="color: black;">
            ${{plan.cantidad}}
          </label>
         
        </p>
        <p style="margin: auto;color: red;" class="centrar">
          Costo:      
          <label style="color: black;">
            ${{plan.costo}}
          </label>
        </p>
      </div>
    
   </div>
   <h5 style="color: #3c9d9b; border-bottom: 1px solid #3c9d9b;">Costo de transporte</h5>
   <div>
     <p >$ {{this.pedido.precio.precio_regocojer}}</p>
  </div>
   <h5 style="color: #860000; border-bottom: 1px solid #860000;">Precio Total:</h5>
   <div>
     <p >$ {{this.subtotal}}</p>
  </div>
   
    <ion-button (click)="verAlerta()" color=danger expand="block">
      Aceptar
    </ion-button>
    <ion-button (click)="this.efectos.ocultarServicios()"color=danger expand="block">
      Cancelar
    </ion-button>
  </div>

</ion-content>
